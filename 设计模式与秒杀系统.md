设计模式（Design pattern）代表了最佳的实践，通常被有经验的面向对象的软件开发人员所采用。设计模式是软件开发人员在软件开发过程中面临的一般问题的解决方案。这些解决方案是众多软件开发人员经过相当长的一段时间的试验和错误总结出来的。

### 工厂模式

属于创建型模式，它提供了一种创建对象的最佳方式。

在工厂模式中，我们在创建对象时不会对客户端暴露创建逻辑，并且是通过使用一个共同的接口来指向新创建的对象。

### 抽象工厂模式

抽象工厂模式（Abstract Factory Pattern）是围绕一个超级工厂创建其他工厂。该超级工厂又称为其他工厂的工厂。这种类型的设计模式属于创建型模式，它提供了一种创建对象的最佳方式。

在抽象工厂模式中，接口是负责创建一个相关对象的工厂，不需要显式指定它们的类。每个生成的工厂都能按照工厂模式提供对象。

### 单例模式

属于创建型模式，它提供了一种创建对象的最佳方式。

这种模式涉及到一个单一的类，该类负责创建自己的对象，同时确保只有单个对象被创建。这个类提供了一种访问其唯一的对象的方式，可以直接访问，不需要实例化该类的对象。

# 适配器模式

适配器模式（Adapter Pattern）是作为两个不兼容的接口之间的桥梁。这种类型的设计模式属于结构型模式，它结合了两个独立接口的功能。

这种模式涉及到一个单一的类，该类负责加入独立的或不兼容的接口功能。举个真实的例子，读卡器是作为内存卡和笔记本之间的适配器。您将内存卡插入读卡器，再将读卡器插入笔记本，这样就可以通过笔记本来读取内存卡。



## 面向对象的四大特点

面向对象是一种对现实世界理解和抽象的方法，是计算机编程技术发展到一定阶段后的产物，是一种是软件开发方法

面向对象主要有四大特性

1、抽象

忽略一个主题中与当前目标无关的东西，专注的注意与当前目标有关的方面。(就是把现实世界中的某一类东西，提取出来，用程序代码表示，抽象出来的一般叫做类或者接口)。抽象并不打算了解全部问题，而是选择其中的一部分，暂时不用部分细节。抽象包括两个方面，一个数据抽象，而是过程抽象。

数据抽象 -->表示世界中一类事物的特征，就是对象的属性。比如鸟有翅膀，羽毛等(类的属性)

过程抽象 -->表示世界中一类事物的行为，就是对象的行为。比如鸟会飞，会叫(类的方法)

2、封装

封装是面向对象的特征之一，是对象和类概念的主要特性。封装就是把过程和数据包围起来，对数据的访问只能通过已定义的界面。如私有变量，用set，get方法获取。

封装保证了模块具有较好的独立性，使得程序维护修改较为容易。对应用程序的修改仅限于类的内部，因而可以将应用程序修改带来的影响减少到最低限度。

3、继承

一种联结类的层次模型，并且允许和鼓励类的重用，提供一种明确表达共性的方法。对象的一个新类可以从现有的类中派生，这个过程称为类继承。新类继承了原始类的特性，新类称为原始类的派生类(子类)，原始类称为新类的基类(父类)。派生类可以从它的父类哪里继承方法和实例变量，并且类可以修改或增加新的方法使之更适合特殊的需要。因此可以说，继承为了重用父类代码，同时为实现多态性作准备。

4、多态

多态是指允许不同类的对象对同一消息做出响应。多态性包括参数化多态性和包含多态性。多态性语言具有灵活/抽象/行为共享/代码共享的优势，很好的解决了应用程序函数同名问题。总的来说，方法的重写，重载与动态链接构成多态性。java引入多态的概念原因之一就是弥补类的单继承带来的功能不足。

动态链接 -->对于父类中定义的方法，如果子类中重写了该方法，那么父类类型的引用将调用子类中的这个方法，这就是动态

## 秒杀系统设计方案

首先从高纬度出发，整体思考问题。秒杀系统无外乎解决两个核心问题：一是并发读，而是并发写。对应到架构设计，就是高可用、一致性和高性能的要求。

- 高性能。秒杀要求高读和高些的支持，如何支撑高并发，如何抵抗高IOPS？核心优化理念其实是类似的：高读就尽量少读或读少，高写就进行数据拆分，主要可以从动静分离，热点优化，系统优化三个方面展开。
- 一致性：秒杀的核心关注是商品库存，有限的商品在同一时间被多个请求同时扣减，而且要保证准确性，目前业界主要采取预扣库存的解决方案。
- 高可用：大型分布式系统在实际运行过程中面对的工况是非常复杂的，系统要预防和面对突发问题，做到服务高可用。

**首先来讲高性能：**

前端页面的动静分离，静态页面缓存

热点优化：热点操作限制，比如阻断用户的频繁刷新操作；热点数据处理优化三步，热点识别，热点隔离，热点优化

系统优化，硬件上提升硬件水平，服务器集群，可瞬时水平扩展的能力；软件代码层面上，减少序列化操作，涉及字符串操作可以进行硬编码等等

**一致性**：

对于库存的解决方案业界最为常见的是采用预扣库存的，将下单减库存和付款减库存两种方式进行结合，将两次操作进行了前后的关联，下单时预扣库存，付款时释放库存。当然，该方案要依然要解决以下问题：竞争对手的恶意下单，以及超卖问题，

恶意下单：主要结合安全和反作弊措施来制止。比如，识别频繁下单但是不付款的买家，对该买家进行打标，这样在该买家下单时不减去库存。再比如设置单人购买最多N件商品等。

超卖问题：设置库存字段值不能为负

**库存是个关键数据，更是热点数据，那我们要解决该热点数据的高并发读写问题。**

秒杀场景解决高并发读关键在于分层校验。即在读链路时，只进行不影响性能的检查操作，如用户的秒杀资格商品状态等，直到写链路时，才对库存做一致性检查，保证最终一致性，不保证强一致性。

在分层校验的设定下，系统可以采用分布式缓存来抵抗高并发读，如分布式redis解决方案等。

高并发写问题：

秒杀商品和普通商品的减库存是有差异的，核心区别在于数据量小，交易时间短，如果能够把减库存直接放到缓存系统中实现的话，能够大幅度提高写的吞吐量。在上述更换DB选型后，我们也可以对数据库进行性能优化。比如阿里团队的AliSQL, 就在数据层实现排队，基于DB层对单行记录做并发排队。

高读和高写的两种处理方式大相径庭。读请求的优化空间大一些，而写请求的瓶颈一般都在存储层，优化思路的本质还是基于CAP理论做平衡。

**高可用**：

流量削峰：答题延迟，消息队列，过滤

