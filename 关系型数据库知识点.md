## 一、MYSQL 
### 【高频】索引
索引使用B+树结构，而不是红黑树 ： {  磁盘预读取使一个结点对应申请一个磁盘页 、红黑树高度太大 }

在大规模数据存储的时候，红黑树往往出现由于树的深度过大而造成磁盘IO读写过于频繁，进而导致效率低下的情况。所以一般红黑树和AVL二叉平衡查找树是内存中使用的数据结构。

【高频】mysql索引为什么使用B+树而不是 B 树？

1. b+树的数据都集中在叶子结点，分支结点只负责索引，而b树的分支结点也有数据域，
2. b+树的层高较小，平均的IO次数少于B树，减少查询时间开销
3. B+树擅长范围查询，叶子结点数据是按顺序存储在双向链表中，B树范围查询只能中序遍历


### 两种引擎之间的区别：

InnoDB：

（1）具有事务(commit)、回滚(rollback)和崩溃修复能力(crash recovery capabilities)的事务安全(transaction-safe (ACID compliant))型表。

（2）支持外键，支持MVVC基于多版本的并发控制协议，不支持全文索引。

（3）InnoDB 中不保存表的具体行数，也就是说，执行select count(*) from table时，InnoDB要扫描一遍整个表来计算有多少行。注意的是，当count(*)语句包含 where条件时，两种表的操作是一样的。

（4）对于AUTO_INCREMENT类型的字段，InnoDB中必须包含只有该字段的索引。

（5）DELETE FROM table时，InnoDB不会重新建立表，而是一行一行的删除。

MyISAM：

（1）不支持事务操作，非事务安全的。

（2）不支持外键，不支持MVVC，支持全文索引，

（3）MyISAM保存表的具体行数，执行select count(*) from table时只要简单的读出保存好的行数即可。

（4）对于AUTO_INCREMENT类型的字段，在MyISAM表中，可以和其他字段一起建立联合索引。

（5）MyISAM存储引擎的读锁和写锁是互斥的，读写操作是串行的。那么，一个进程请求某个MyISAM表的读锁，同时另一个进程也请求同一表的写锁，MySQL如何处理呢？答案是写进程先获得锁。不仅如此，即使读请求先到锁等待队列，写请求后到，写锁也会插到读锁请求之前！这是因为MySQL认为写请求一般比读请求要重要。这也正是MyISAM表不太适合于有大量更新操作和查询操作应用的原因，因为，大量的更新操作会造成查询操作很难获得读锁，从而可能永远阻塞。这种情况有时可能会变得非常糟糕！

### 什么是事务?

事务是应用程序中一系列严密的操作，用来保证数据库的完整性。

MySQL中只有使用了 Innodb 数据库引擎的数据库或表才支持事务。

mysql默认自动提交事务。

### 事务特性ACID

四个特性：原子性（ Atomicity ）、一致性（ Consistency ）、隔离性（ Isolation ）和持续性（ Durability ）。简称为 ACID 。

注意：这里原子性跟一致性需要注意的是：原子性关注状态，要么全部成功，要么全部失败，不存在部分成功的状态。而一致性关注数据的可见性，中间状态的数据对外部不可见，只有最初状态和最终状态的数据对外可见。

### 并发事务带来的问题
<img src="/shortcuts/事务的隔离级别与三种读问题.PNG" />


### mysql日志系统：



### 乐观锁和悲观锁
悲观锁
悲观锁（Pessimistic Lock），顾名思义，就是很悲观，每次去拿数据的时候都认为别人会修改，所以每次在拿数据的时候都会上锁，这样别人想拿这个数据就会block直到它拿到锁。

悲观锁：假定会发生并发冲突，屏蔽一切可能违反数据完整性的操作。

Java synchronized 就属于悲观锁的一种实现，每次线程要修改数据时都先获得锁，保证同一时刻只有一个线程能操作数据，其他线程则会被block。

乐观锁
乐观锁（Optimistic Lock），顾名思义，就是很乐观，每次去拿数据的时候都认为别人不会修改，所以不会上锁，但是在提交更新的时候会判断一下在此期间别人有没有去更新这个数据。乐观锁适用于读多写少的应用场景，这样可以提高吞吐量。

乐观锁：假设不会发生并发冲突，只在提交操作时检查是否违反数据完整性。








【高频】事务的隔离级别


【高频】 MVCC机制



聚簇索引和非聚簇索引区别？ 主键索引和二级索引了解吗？



为什么不对每个列创建索引呢？



【高频】SQL语句优化 ，SQL题目（字节要求撸代码）


explain中 rows type key extra字段的含义？




count(1) count(*) count(列值)的区别






